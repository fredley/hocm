<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Primary Meta Tags -->
    <title>Humans of Classical Music</title>
    <meta name="title" content="Humans of Classical Music">
    <meta name="description" content="Musicians, actors, comedians and podcasters from around the world give you their classical music recommendations. Sign up to receive a new video every Thursday.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://humansofclassicalmusic.co.uk/">
    <meta property="og:title" content="Humans of Classical Music">
    <meta property="og:description" content="Musicians, actors, comedians and podcasters from around the world give you their classical music recommendations. Sign up to receive a new video every Thursday.">
    <meta property="og:image" content="https://humansofclassicalmusic.co.uk/banner.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://humansofclassicalmusic.co.uk/">
    <meta property="twitter:title" content="Humans of Classical Music">
    <meta property="twitter:description" content="Musicians, actors, comedians and podcasters from around the world give you their classical music recommendations. Sign up to receive a new video every Thursday.">
    <meta property="twitter:image" content="https://humansofclassicalmusic.co.uk/banner.jpg">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@100;300&family=Raleway:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://ko-fi.com/widgets/widget_2.js"></script>
    <script src="https://apis.google.com/js/platform.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZNPKL087QX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-ZNPKL087QX');
    </script>
  </head>
  <body>
      <div class="container">
        <h1>
            <a href="https://alternativeclassical.co.uk" target="_blank"><img src="ac.png" class="logo" alt="Alternative Classical"></a>
            Humans&nbsp;of&nbsp;Classical&nbsp;Music
        </h1>
        <div class="row">
          <div class="col-sm">
            <p>Classical music can be surprising, exhilarating, dramatic, quirky, funny, captivating and comforting, sometimes all at the same time. Musicians, actors, comedians and podcasters from around the world are here to give you their personal recommendations. </p>
            <p><a href="http://eepurl.com/hocvCD">Sign up</a> to receive a new video every Thursday, and follow the <a href="https://open.spotify.com/playlist/5LzUwqX2mdSoqpqNLKxdL3" target="_blank">Spotify&nbsp;playlist</a> to hear all the tracks. </p>
          </div>
        </div>
      </div>
      <div id="sub-breakout">
        <div class="container">
          <div class="row">
              <div class="col">
                  <h5>Join the newsletter</h5>
                  <a class="btn btn-primary btn-light btn-sm" href="http://eepurl.com/hocvCD"><i class="fa fa-envelope"></i> Get notified</a>
              </div>
              <div class="col">
                  <h5>Subscribe on YouTube</h5>
                  <div class="g-ytsubscribe" data-channelid="UCREETgm4vgDIfqWiAt4sV7A" data-layout="default" data-count="hidden"></div>
              </div>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="row">
            <div class="col-sm video">
                <h3 class="video-info">Watch the videos</h3>
                <div class="embedWrapper" style="opacity:0;">
                  <div id="player"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm playlist">
                <h3>Listen to the playlist</h3>
                <div class="embedWrapper spotify">
                </div>
            </div>
        </div>
      </div>
      <footer class="container">
          <div class="row">
            <div class="col socials">
                  <a href="https://www.instagram.com/classical.humans/" target="_blank">
                    <i class="fab fa-instagram"></i>
                  </a>
                  <a href="https://www.facebook.com/classical.humans" target="_blank">
                    <i class="fab fa-facebook"></i>
                  </a>
                  <a href="https://www.youtube.com/playlist?list=PLeb4OY39Vyh8DNR3GrzWGHuc5UqToYjWw" target="_blank">
                    <i class="fab fa-youtube"></i>
                  </a>
                  <a href="https://twitter.com/humansclassical" target="_blank">
                    <i class="fab fa-twitter"></i>
                  </a>
                  <a href="https://open.spotify.com/playlist/5LzUwqX2mdSoqpqNLKxdL3" target="_blank">
                    <i class="fab fa-spotify"></i>
                  </a>
            </div>
          </div>
          <div class="container">
            <script type="text/javascript">
                kofiwidget2.init('Support HOCM on Ko-fi', '#00ACAC', 'D1D015OX3');
                kofiwidget2.draw();
            </script>
          </div>
        </footer>
        <div class="ac-footer">
          <div class="container">
              <p><a href="https://alternativeclassical.co.uk" target="_blank"><img src="ac.png" alt="Alternative Classical" class="logo-fl"></a>
              <span>Humans&nbsp;of&nbsp;Classical&nbsp;Music is an <a href="https://alternativeclassical.co.uk">Alternative&nbsp;Classical</a>&nbsp;project</span></p>
          </div>
        </div>
    <script>
      let player
      let cued = false
      let shown = false
      let ytready = false
      let jqready = false
      let loader = 0

      $(document).ready(() => {
        console.log('doc ready')
        var tag = document.createElement('script')

        tag.src = "https://www.youtube.com/iframe_api"
        var firstScriptTag = document.getElementsByTagName('script')[0]
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag)

        jqready = true
        if (ytready) {
          loadplayer()
        }
      })

      function onYouTubeIframeAPIReady() {
        console.log('yt ready')
        ytready = true
        if (jqready) {
          loadplayer()
        }
      }

      const loadplayer = () => {
        console.log('loading')
        if (player === undefined){
          player = new YT.Player('player', {
            height: '315',
            width: '560',
            host: `${window.location.protocol}//www.youtube.com`,
            origin: `${window.location.protocol}//${window.location.host}`,
            playerVars: {
              listType: 'playlist',
              list: 'PLeb4OY39Vyh8DNR3GrzWGHuc5UqToYjWw',
            },
            suggestedQuality: 'hd',
            events: {
              onReady: onPlayerReady,
              onError: onPlayerError,
              onStateChange: onPlayerStateChange,
            }
          })
          loader = setInterval(loadplayer, 2000)
        } else {
          console.log('loaded')
          clearInterval(loader)
        }
      }

      const onPlayerReady = () => {
          const playlist = player.getPlaylist()
          player.loadPlaylist(playlist.reverse())
        }

      const onPlayerError = (event) => {
          console.log(event)
        }

        const onPlayerStateChange = (event) => {
          if(event.data == YT.PlayerState.BUFFERING) {
            cued = true
          }
          if (cued && event.data === -1 && !shown){
            $(".video-info").text(`Latest: ${event.target.getVideoData().title.replace(", Humans of Classical Music", "")}`)
            $(".embedWrapper").css("opacity", 1)
            shown = true
            $(".spotify").html(`<iframe
                        src="https://open.spotify.com/embed/playlist/5LzUwqX2mdSoqpqNLKxdL3"
    width="560"
    height="315"
    frameborder="0"
    allowtransparency="true"
    allow="encrypted-media">
</iframe>`)
          }
      }
    </script>
  </body>
</html>
